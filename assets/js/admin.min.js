function Nmeri_getFormdata(t,e){var n="string"==typeof t?document.querySelector(t):t,a={};new FormData(n).forEach((function(t,e){-1!==e.lastIndexOf("[]")?a[e]?a[e].push(t):a[e]=[t]:a[e]=t}));var i=n.querySelector('[type="submit"]');return i&&i.name&&(a[i.name]=i.value),e?new URLSearchParams(a).toString():a}function Nmeri_block(t){jQuery.blockUI&&(Array.isArray(t)?t:[t]).forEach((function(e){jQuery(t).is(".is-nm-blocked")||jQuery(t).parents(".is-nm-blocked").length||jQuery(e).addClass("is-nm-blocked").block({message:null,overlayCSS:{backgroundColor:"#fff"},css:{backgroundColor:"transparent",border:"none"}})}))}function Nmeri_unblock(t){jQuery.blockUI&&(Array.isArray(t)?t:[t]).forEach((function(t){jQuery(t).removeClass("is-nm-blocked").unblock()}))}function Nmeri_Dialog(t){var e=jQuery(t),n=JSON.parse(t.dataset.options),a={show:200,hide:200,minHeight:0,modal:!0,open:function(){if(jQuery(this).closest(".ui-dialog").find(".ui-dialog-titlebar-close").addClass("ui-button"),jQuery(".ui-widget-overlay").on("click",(function(){e.dialog("close")})),jQuery.ui&&jQuery.ui.dialog&&jQuery.ui.dialog.prototype._allowInteraction){var t=jQuery.ui.dialog.prototype._allowInteraction;jQuery.ui.dialog.prototype._allowInteraction=function(e){return!!jQuery(e.target).is(".select2-search__field")||t.apply(this,arguments)}}},close:function(){e.dialog("destroy")}};a=Object.assign(a,n),e.dialog(a)}function Nmeri_showTemplate(t){Nmeri_Dialog(jQuery(t)[0])}function Nmeri_showToast(t){var e=t instanceof Array?t:[t],n="nmgr-toaster";document.querySelector("."+n)||jQuery(document.body).append('<div class="nmgr-toaster"></div>'),jQuery(document.body).on("click",".nmgr-close-btn",(function(){jQuery(this).closest(".nmgr-notice").remove()})),e.forEach((function(t){var e=jQuery(t);e.appendTo(".nmgr-toaster"),setTimeout((function(){e.remove()}),5e3)}))}function Nmeri_closeDialog(){var t=jQuery(".nmgr-dialog.modal").find(".ui-dialog-content").prop("id");jQuery("#"+t).dialog("close")}function Nmeri_replaceTemplates(t){for(var e in t){var n=document.querySelectorAll(e);if(n){var a=t[e];n.forEach((function(t){var n=document.createElement("template");n.innerHTML=a;var i=n.content.children[0];i=void 0===i?"":i,t.replaceWith(i),jQuery(document.body).trigger("nm_replaced_template",{key:e,template:i})}))}}}function Nmeri_redirect(t){-1===t.indexOf("https://")||-1===t.indexOf("http://")?window.location=t:window.location=decodeURI(t)}function Nmeri_processResponse(t,e){t.log&&console.log(t),e&&e.block&&Nmeri_unblock(e.block),(e&&e.close_dialog||t.close_dialog)&&Nmeri_closeDialog(),t.show_template&&Nmeri_showTemplate(t.show_template),t.toast_notice&&Nmeri_showToast(t.toast_notice),t.replace_templates&&Nmeri_replaceTemplates(t.replace_templates),t.redirect&&Nmeri_redirect(t.redirect)}var nmgr=window.nmgr||{};jQuery((function(t){nmgr.dropdown=function(){t(".nmgr-dropdown").menu()},nmgr.dropdown(),nmgr.tooltip=function(){var e={show:150,hide:150,content:function(){return t(this).attr("title")},classes:{"ui-tooltip":"nmgr-tooltip"},position:{my:"left+15 center",at:"top-96%"}};t.widget("nmgr.nmeriTooltip",t.ui.tooltip,{}),t(".nmgr-tip").nmeriTooltip(e)},nmgr.tooltip(),nmgr.init_datepicker=function(e){e=e||".nmgr-use-datepicker";var n="nmgr-datepicker",a=nmgr_global_params.datepicker_options;a.styleDatepicker&&(a=Object.assign(a,{beforeShow:function(t,e){e.input.hasClass("nmgr-use-datepicker")&&e.dpDiv.addClass(n)},onClose:function(t,e){e.input.hasClass("nmgr-use-datepicker")&&e.dpDiv.removeClass(n)}})),t(e).each((function(){var e=this.dataset;for(var n in e)if(n.includes("datepicker")){var i=n.replace("datepicker",""),r=i.charAt(0).toLowerCase()+i.slice(1);a[r]=e[n]}for(var n in a)"string"==typeof a[n]&&-1<a[n].indexOf("function")&&(a[n]=Function('"use strict";return('+a[n]+")")());t(this).datepicker(a).on("keyup",(function(){if(a.altField){var e,n=t(this).datepicker("option","dateFormat");try{e=t.datepicker.parseDate(n,this.value)}catch(t){}e||t(a.altField).val("")}}))}))},nmgr.post_action=function(e){if(e.btn&&e.btn.dataset&&e.btn.dataset.notice&&!window.confirm(e.btn.dataset.notice))return!1;if(e.block&&Nmeri_block(e.block),e.postdata){var n={action:"nmgr_post_action",_wpnonce:nmgr_global_params.nonce,ajax_url:nmgr_global_params.ajax_url},a=e.postdata,i=a instanceof FormData;if(i)for(var r in n)a.append(r,n[r]);else a=Object.assign({},n,a);var o={url:i?a.get("ajax_url"):a.ajax_url,data:a,success:function(n){if(Nmeri_processResponse(n,e),i){var r={};for(var o of a.entries())r[o[0]]=o[1];a=r}t(document.body).trigger("nmgr_post_action_response",{postdata:a,response:n})}};i&&(o.processData=!1,o.contentType=!1),t.post(o)}},t(document.body).on("click",".nmgr-nav",(function(e){e.preventDefault();var n="#"+this.dataset.target_id,a={block:n,postdata:{nmgr_post_action:"paginate",section_dataset:t(this).closest(".nmgr-account-template").data(),table_dataset:t(n).data(),nav_dataset:this.dataset}};nmgr.post_action(a)})),t(document.body).on("click",".nmgr-table .orderby",(function(e){e.preventDefault();var n="#"+t(this).closest(".nmgr-table").attr("id"),a={block:n,postdata:{nmgr_post_action:"orderby",section_dataset:t(this).closest(".nmgr-account-template").data(),table_dataset:t(n).data(),orderby:this.dataset.orderby,order:this.classList.contains("asc")?"desc":"asc"}};nmgr.post_action(a)})),t(document.body).on("nmgr_post_action_response",(function(){nmgr.tooltip(),nmgr.dropdown()})),t(".nmgr-diaog").on("dialogcreate",(function(){nmgr.tooltip(),nmgr.dropdown()}))})),jQuery((function(t){if("undefined"==typeof nmgr_admin_params)return!1;nmgr.items={container:"#nmgr-items",init:function(){t(document.body).on("nmgr_post_action_response",this.post_action_response).on("click","#nmgr-items .nmgr-post-action",this.pre_post_action).on("input",".nmgr-item-part.nmgr_quantity input.quantity",this.save_item_quantity).on("change",".nmgr-product-search",this.new_add_items_row).on("click",".nmgr-add-items-dialog .nmgr-add",this.add_items).on("removed_from_cart",this.remove_notice).on("click",".nmgr_add_to_cart_button",this.add_single_product_to_cart).on("click",".nmgr-bulk-add-to-cart",this.add_multiple_products_to_cart).on("change","#nmgr-items .nmgr-select-all",this.toggle_select_items).on("change","#nmgr-items .nmgr-select",this.maybe_show_bulk_actions).on("nmgr_add_to_cart_response",this.remove_loading_animation).on("click",".nmgr-display-modes.items .mode",this.save_display_mode_to_session).on("input","#nmgr-purchase-refund-form .nmgr-quantity",this.toggle_purchase_refund_options).on("submit","#nmgr-purchase-refund-form",this.submit_purchase_refund_form).on("dialogopen","#nmgr-add-items-dialog",this.init_add_items_form)},reloaded:function(e){t(document.body).trigger("nmgr_items_reloaded",e)},pre_post_action:function(e){e.preventDefault();var n=Object.assign({},this.dataset);n.dataset=t("#nmgr-items")[0].dataset,"bulk"===this.dataset.nmgr_post_mode&&(n.wishlist_item_ids=nmgr.items.get_selected_item_ids(),delete n.wishlist_item_id);var a={btn:this,block:nmgr.items.container,postdata:n};nmgr.post_action(a)},post_action_response:function(e,n){n.response.replace_templates&&n.response.replace_templates.hasOwnProperty("#nmgr-items")&&nmgr.items.reloaded(n.response.wishlist||null),"delete_item"===n.postdata.nmgr_post_action&&(t(document.body).trigger("wc_fragment_refresh"),t(document.body).trigger("nmgr_removed_from_wishlist",n.response))},save_item_quantity:function(){var t={block:this.closest(".nmgr-item-part").parentElement,postdata:{nmgr_post_action:"save_item_quantity",wishlist_item_id:this.dataset.item_id,quantity:this.value}};nmgr.post_action(t)},init_add_items_form:function(){t(document.body).trigger("nmgr-select2-init")},new_add_items_row:function(){if(t(this).closest("tr").is(":last-child")){var e=t(this).closest("table").find("tbody"),n=e.find("tr").length,a=e.data("row").replace(/\[0\]/g,"["+n+"]");e.append('<tr class="added-row">'+a+"</tr>"),t(document.body).trigger("nmgr-select2-init")}},add_items:function(){var e=[];t(this).closest(".nmgr-add-items-dialog").find("tbody tr").each((function(){var n={};t(t(this).find(":input").serializeArray()).each((function(t,e){n[e.name]=e.value})),e.push(n)}));var n={block:this,postdata:{nmgr_post_action:"add_item",wishlist_id:t(nmgr.items.container).attr("data-wishlist_id"),nmgr_add_items_data:e}};nmgr.post_action(n)},add_single_product_to_cart:function(e){var n=t(this),a={},i=n.closest(".nmgr-add-to-cart-form");if(!n.is(".nmgr_ajax_add_to_cart"))return!0;e.preventDefault(),t(i.serializeArray()).each((function(t,e){a[e.name]=e.value})),n.removeClass("added").addClass("loading"),nmgr.items.add_to_cart([a])},add_multiple_products_to_cart:function(e){e.preventDefault();var n=[],a=this;if(a.classList.add("loading"),t(nmgr.items.container).find(".nmgr-select:checked").closest(".item").each((function(){var e={},i=t(this).find(".nmgr-add-to-cart-form");i.length&&(t(i.serializeArray()).each((function(t,n){e[n.name]=n.value})),n.push(e),a.classList.contains("nmgr_ajax_add_to_cart")&&t(this).find(".nmgr_add_to_cart_button").removeClass("added").addClass("loading"))})),n.length)if(a.classList.contains("nmgr_ajax_add_to_cart"))nmgr.items.add_to_cart(n);else{var i=JSON.stringify(n),r=document.createElement("form"),o=document.createElement("input");r.method="post",o.type="hidden",o.name="nmgr_add_to_cart_item_data_string",o.value=i,r.appendChild(o),document.body.appendChild(r),r.submit()}else a.classList.remove("loading")},add_to_cart:function(e){var n={action:"nmgr_add_to_cart",nmgr_add_to_cart_item_data:e};t.post(nmgr_global_params.ajax_url,n,(function(e){e.fragments&&(e.fragments.success&&e.fragments.redirect_url?window.location=e.fragments.redirect_url:(t(".woocommerce-error, .woocommerce-message, .woocommerce-info").remove(),t(document.body).trigger("nmgr_add_to_cart_response",e.fragments),e.fragments.notices&&e.fragments.notices.forEach((function(t){Nmeri_showToast(t)})),e.fragments.success&&(t(document.body).trigger("added_to_cart",[e.fragments,e.cart_hash]),t(document.body).trigger("nmgr_added_to_cart",[e.fragments.items_data?e.fragments.items_data:""]))))}))},remove_loading_animation:function(e,n){void 0!==n&&n.items_data&&n.items_data.forEach((function(e){t('[data-wishlist_item_id="'+e.wishlist_item_id+'"].nmgr_add_to_cart_button').removeClass("loading")}));var a=document.querySelector(".nmgr-bulk-add-to-cart");a&&a.classList.remove("loading")},toggle_select_items:function(){var t=document.querySelectorAll(".nmgr-select");if(0<t.length){for(var e=0;e<t.length;e++)!0===this.checked?t[e].checked=!0:t[e].checked=!1;nmgr.items.maybe_show_bulk_actions()}},maybe_show_bulk_actions:function(){var t=document.querySelector(".nmgr-items-bulk-actions"),e=document.querySelectorAll("#nmgr-items .nmgr-select:checked");if(e.length&&!t.classList.contains("show"))t.classList.add("show");else if(!e.length&&t.classList.contains("show")){var n=document.querySelector("#nmgr-items .nmgr-select-all");n&&(n.checked=!1),t.classList.remove("show")}},get_selected_items:function(){return document.querySelectorAll("#nmgr-items .nmgr-select:checked")},get_selected_item_ids:function(){var t=[],e=this.get_selected_items();return e.length&&e.forEach((function(e){t.push(e.value)})),t},save_display_mode_to_session:function(e){e.preventDefault();var n="#nmgr_table_items",a={block:n,postdata:{nmgr_post_action:"save_display_mode_to_session",section_dataset:t("#nmgr-items")[0].dataset,table_dataset:t(n).data(),mode:this.dataset.mode}};nmgr.post_action(a)},toggle_purchase_refund_options:function(){var e=t(this).closest("form"),n=parseInt(this.value),a=parseInt(this.dataset.qty);n<a?e.find(".nmgr-options").fadeOut():n>a&&e.find(".nmgr-options").fadeIn()},submit_purchase_refund_form:function(e){e.preventDefault();var n={block:this,postdata:Object.assign(Nmeri_getFormdata(this),{dataset:t("#nmgr-items")[0].dataset,nmgr_post_action:"save_purchase_refund_form"})};nmgr.post_action(n)},remove_notice:function(e){var n=".woocommerce-error, .woocommerce-message, .woocommerce-info";void 0!==e?t(e).find(n).remove():t(n).remove()}},nmgr.items.init(),{init:function(){t(document.body).on("click",".nmgr-message .delete-wishlist-message",this.delete)},delete:function(e){e.preventDefault();var n={btn:this,block:t(this).closest(".nmgr-message"),postdata:Object.assign({},this.dataset)};nmgr.post_action(n)}}.init();var e,n,a,i,r,o,s,c={init:function(){try{t(document.body).on("nmgr-select2-init",this.activate_select2).trigger("nmgr-select2-init"),t(".nmgr-user-search").on("select2:select",this.update_account_shipping_address)}catch(t){window.console.log(t)}},activate_select2:function(){c.select2_user_search(),c.select2_product_search()},select2_product_search:function(){t(":input.nmgr-product-search").each((function(){var e=this,n={allowClear:!0,minimumInputLength:3,escapeMarkup:function(t){return t},ajax:{url:t(this).data("ajax_url"),dataType:"json",delay:250,data:function(e){return{term:e.term,action:"nmgr_json_search_products",security:t(this).data("nonce"),display_stock:t(this).data("display_stock")}},processResults:function(e){var n=[];return e&&t.each(e,(function(t,e){n.push({id:t,text:e})})),{results:n}},cache:!0}};e.dataset.textInputTooShort&&(n.language={},n.language.inputTooShort=function(){return e.dataset.textInputTooShort}),t(this).select2(n)}))},select2_user_search:function(){t(":input.nmgr-user-search").each((function(){var e={allowClear:!!t(this).data("allow-clear"),placeholder:t(this).data("placeholder"),minimumInputLength:t(this).data("minimum_input_length")?t(this).data("minimum_input_length"):"1",escapeMarkup:function(t){return t},ajax:{url:nmgr_global_params.ajax_url,dataType:"json",delay:250,data:function(e){return{term:e.term,action:"nmgr_json_search_users",security:nmgr_admin_params.search_users_nonce,exclude:t(this).data("exclude")}},processResults:function(e){var n=[];return e&&t.each(e,(function(t,e){n.push({id:t,text:e.text,shipping_address:e.shipping_address})})),{results:n}},cache:!0}};t(this).select2(e)}))},update_account_shipping_address:function(e){var n=e.params.data;n.shipping_address&&t(".nmgr-copy-shipping-address").attr("data-nmgr-address",n.shipping_address)}};c.init(),{init:function(){t(document.body).on("click",".nmgr-copy-shipping-address",this.load_address)},load_address:function(e){if(e.preventDefault(),t(".nmgr-shipping-fields").length>0){var n=JSON.parse(e.target.dataset.nmgrAddress);for(var a in n)t(".nmgr-shipping-fields :input#shipping_"+a).val(n[a]).trigger("change")}}}.init(),nmgr.init_datepicker(),n=t("#nm_gift_registry-bg-img.postbox"),a=n.find(".upload-custom-img"),i=n.find(".delete-custom-img"),r=n.find(".nmgr-set-bg-img-desc"),o=n.find(".custom-img-container"),s=n.find(".custom-img-id"),n.on("click",".upload-custom-img, .custom-img-container",(function(t){t.preventDefault(),e||(e=wp.media({title:"Select or Upload Image",button:{text:"Use this image"},multiple:!1})).on("select",(function(){var t=e.state().get("selection").first().toJSON();"image"===t.type&&(o.removeClass("hidden").html('<img src="'+t.url+'" alt="" />'),s.val(t.id),a.addClass("hidden"),i.removeClass("hidden"),r.removeClass("hidden"))})),e.open()})),i.on("click",(function(t){t.preventDefault(),o.html("").addClass("hidden"),a.removeClass("hidden"),i.addClass("hidden"),r.addClass("hidden"),s.val("")}));var d={states:null,init:function(){"undefined"!=typeof nmgr_admin_params&&void 0!==nmgr_admin_params.countries&&(this.states=t.parseJSON(nmgr_admin_params.countries.replace(/&quot;/g,'"'))),t(".js_field-country").selectWoo().change(this.change_country),t(".js_field-country").trigger("change",[!0]),t(document.body).on("change","select.js_field-state",this.change_state).on("country-change.woocommerce",this.hide_fields)},field_is_required:function(t,e){e?(t.find(":input").attr("required","1").show(),0===t.find("label .required").length&&t.find("label").append('&nbsp;<abbr class="required" title="'+nmgr_admin_params.i18n_required_text+'">*</abbr>')):(t.find("label .required").remove(),t.find(":input").removeAttr("required"))},hide_fields:function(e,n,a){var i,r=a,o=nmgr_admin_params.locale.replace(/&quot;/g,'"'),s=JSON.parse(o),c=JSON.parse(nmgr_admin_params.locale_fields);i=void 0!==s[n]?s[n]:s.default,t.each(c,(function(e,n){var a=r.find(n),o=t.extend(!0,{},s.default[e],i[e]);void 0!==o.required?d.field_is_required(a,o.required):d.field_is_required(a,!1),"state"!==e&&(void 0!==o.hidden&&!0===o.hidden?a.hide().find(":input").val(""):a.show())}))},change_country:function(e,n){if(void 0===n&&(n=!1),null!==d.states){var a,i=t(this),r=i.val(),o=i.parents("div.nmgr-shipping-fields").find(":input.js_field-state"),s=o.parent(),c=o.attr("name"),m=o.attr("id"),l=i.data("woocommerce.stickState-"+r)?i.data("woocommerce.stickState-"+r):o.val(),u=o.attr("placeholder");if(n&&i.data("woocommerce.stickState-"+r,l),s.show().find(".select2-container").remove(),t.isEmptyObject(d.states[r]))a=t('<input type="text" />').prop("id",m).prop("name",c).prop("placeholder",u).addClass("js_field-state").val(""),o.replaceWith(a);else{var _=d.states[r],g=t('<option value=""></option>').text(nmgr_admin_params.i18n_select_state_text);a=t("<select></select>").prop("id",m).prop("name",c).prop("placeholder",u).addClass("js_field-state select short").append(g),t.each(_,(function(e){var n=t("<option></option>").prop("value",e).text(_[e]);a.append(n)})),a.val(l),o.replaceWith(a),a.show().selectWoo().hide().change()}t(document.body).trigger("country-change.woocommerce",[r,t(this).closest("div")])}},change_state:function(){var e=t(this),n=e.val(),a=e.parents("div.nmgr-shipping-fields").find(":input.js_field-country"),i=a.val();a.data("woocommerce.stickState-"+i,n)}};d.init()}));