function Nmeri_getFormdata(t,e){var a="string"==typeof t?document.querySelector(t):t,n={};new FormData(a).forEach((function(t,e){-1!==e.lastIndexOf("[]")?n[e]?n[e].push(t):n[e]=[t]:n[e]=t}));var o=a.querySelector('[type="submit"]');return o&&o.name&&(n[o.name]=o.value),e?new URLSearchParams(n).toString():n}function Nmeri_block(t){jQuery.blockUI&&(Array.isArray(t)?t:[t]).forEach((function(e){jQuery(t).is(".is-nm-blocked")||jQuery(t).parents(".is-nm-blocked").length||jQuery(e).addClass("is-nm-blocked").block({message:null,overlayCSS:{backgroundColor:"#fff"},css:{backgroundColor:"transparent",border:"none"}})}))}function Nmeri_unblock(t){jQuery.blockUI&&(Array.isArray(t)?t:[t]).forEach((function(t){jQuery(t).removeClass("is-nm-blocked").unblock()}))}function Nmeri_Dialog(t){var e=jQuery(t),a=JSON.parse(t.dataset.options),n={show:200,hide:200,minHeight:0,modal:!0,open:function(){if(jQuery(this).closest(".ui-dialog").find(".ui-dialog-titlebar-close").addClass("ui-button"),jQuery(".ui-widget-overlay").on("click",(function(){e.dialog("close")})),jQuery.ui&&jQuery.ui.dialog&&jQuery.ui.dialog.prototype._allowInteraction){var t=jQuery.ui.dialog.prototype._allowInteraction;jQuery.ui.dialog.prototype._allowInteraction=function(e){return!!jQuery(e.target).is(".select2-search__field")||t.apply(this,arguments)}}},close:function(){e.dialog("destroy")}};n=Object.assign(n,a),e.dialog(n)}function Nmeri_showTemplate(t){Nmeri_Dialog(jQuery(t)[0])}function Nmeri_showToast(t){var e=t instanceof Array?t:[t],a="nmgr-toaster";document.querySelector("."+a)||jQuery(document.body).append('<div class="nmgr-toaster"></div>'),jQuery(document.body).on("click",".nmgr-close-btn",(function(){jQuery(this).closest(".nmgr-notice").remove()})),e.forEach((function(t){var e=jQuery(t);e.appendTo(".nmgr-toaster"),setTimeout((function(){e.remove()}),5e3)}))}function Nmeri_closeDialog(){var t=jQuery(".nmgr-dialog.modal").find(".ui-dialog-content").prop("id");jQuery("#"+t).dialog("close")}function Nmeri_replaceTemplates(t){for(var e in t){var a=document.querySelectorAll(e);if(a){var n=t[e];a.forEach((function(t){var a=document.createElement("template");a.innerHTML=n;var o=a.content.children[0];o=void 0===o?"":o,t.replaceWith(o),jQuery(document.body).trigger("nm_replaced_template",{key:e,template:o})}))}}}function Nmeri_redirect(t){-1===t.indexOf("https://")||-1===t.indexOf("http://")?window.location=t:window.location=decodeURI(t)}function Nmeri_processResponse(t,e){t.log&&console.log(t),e&&e.block&&Nmeri_unblock(e.block),(e&&e.close_dialog||t.close_dialog)&&Nmeri_closeDialog(),t.show_template&&Nmeri_showTemplate(t.show_template),t.toast_notice&&Nmeri_showToast(t.toast_notice),t.replace_templates&&Nmeri_replaceTemplates(t.replace_templates),t.redirect&&Nmeri_redirect(t.redirect)}var nmgr=window.nmgr||{};jQuery((function(t){nmgr.dropdown=function(){t(".nmgr-dropdown").menu()},nmgr.dropdown(),nmgr.tooltip=function(){var e={show:150,hide:150,content:function(){return t(this).attr("title")},classes:{"ui-tooltip":"nmgr-tooltip"},position:{my:"left+15 center",at:"top-96%"}};t.widget("nmgr.nmeriTooltip",t.ui.tooltip,{}),t(".nmgr-tip").nmeriTooltip(e)},nmgr.tooltip(),nmgr.init_datepicker=function(e){e=e||".nmgr-use-datepicker";var a="nmgr-datepicker",n=nmgr_global_params.datepicker_options;n.styleDatepicker&&(n=Object.assign(n,{beforeShow:function(t,e){e.input.hasClass("nmgr-use-datepicker")&&e.dpDiv.addClass(a)},onClose:function(t,e){e.input.hasClass("nmgr-use-datepicker")&&e.dpDiv.removeClass(a)}})),t(e).each((function(){var e=this.dataset;for(var a in e)if(a.includes("datepicker")){var o=a.replace("datepicker",""),i=o.charAt(0).toLowerCase()+o.slice(1);n[i]=e[a]}for(var a in n)"string"==typeof n[a]&&-1<n[a].indexOf("function")&&(n[a]=Function('"use strict";return('+n[a]+")")());t(this).datepicker(n).on("keyup",(function(){if(n.altField){var e,a=t(this).datepicker("option","dateFormat");try{e=t.datepicker.parseDate(a,this.value)}catch(t){}e||t(n.altField).val("")}}))}))},nmgr.post_action=function(e){if(e.btn&&e.btn.dataset&&e.btn.dataset.notice&&!window.confirm(e.btn.dataset.notice))return!1;if(e.block&&Nmeri_block(e.block),e.postdata){var a={action:"nmgr_post_action",_wpnonce:nmgr_global_params.nonce,ajax_url:nmgr_global_params.ajax_url},n=e.postdata,o=n instanceof FormData;if(o)for(var i in a)n.append(i,a[i]);else n=Object.assign({},a,n);var r={url:o?n.get("ajax_url"):n.ajax_url,data:n,success:function(a){if(Nmeri_processResponse(a,e),o){var i={};for(var r of n.entries())i[r[0]]=r[1];n=i}t(document.body).trigger("nmgr_post_action_response",{postdata:n,response:a})}};o&&(r.processData=!1,r.contentType=!1),t.post(r)}},t(document.body).on("click",".nmgr-nav",(function(e){e.preventDefault();var a="#"+this.dataset.target_id,n={block:a,postdata:{nmgr_post_action:"paginate",section_dataset:t(this).closest(".nmgr-account-template").data(),table_dataset:t(a).data(),nav_dataset:this.dataset}};nmgr.post_action(n)})),t(document.body).on("click",".nmgr-table .orderby",(function(e){e.preventDefault();var a="#"+t(this).closest(".nmgr-table").attr("id"),n={block:a,postdata:{nmgr_post_action:"orderby",section_dataset:t(this).closest(".nmgr-account-template").data(),table_dataset:t(a).data(),orderby:this.dataset.orderby,order:this.classList.contains("asc")?"desc":"asc"}};nmgr.post_action(n)})),t(document.body).on("nmgr_post_action_response",(function(){nmgr.tooltip(),nmgr.dropdown()})),t(".nmgr-diaog").on("dialogcreate",(function(){nmgr.tooltip(),nmgr.dropdown()}))})),jQuery((function(t){var e={init:function(){t(document.body).on("nmgr_added_to_wishlist nmgr_items_reloaded",this.reload)},reload:function(a){var n=t(".nmgr-cart");n.length>0&&n.each((function(){e.get_cart_template(this)}))},get_cart_template:function(t){var e={nmgr_post_action:"load_wishlist_cart",type:t.dataset.type,cart_id:t.getAttribute("id")},a={block:t,postdata:e};nmgr.post_action(a)}};e.init(),function(){var t=jQuery;function e(){var e=t("#nmgr-atw-content");e.find("#atw-shipping").length>0&&t(document.body).off("country_to_state_changed");var a=e.find("#atw-selwish");a.length>0&&a.trigger("change")}function a(e,a){return t(void 0===a?'.nmgr-atw-add[data-product_id="'+e+'"]':'.nmgr-atw-add[data-type="'+a+'"][data-product_id="'+e+'"]')}t(document.body).on("click",".atw-get-section",(function(e){e.preventDefault();var a={block:this,postdata:{nmgr_post_action:this.dataset.post_action,formdata:t(this).closest("form").serialize(),dataset:this.dataset}};nmgr.post_action(a)})).on("dialogcreate","#nmgr-atw-dialog",e).on("nmgr_post_action_response",(function(n,o){var i=o.postdata.nmgr_post_action,r=o.response;if(r.added_to_wishlist&&r.wishlist_type&&r.btn_id){var s=a(r.btn_id,r.wishlist_type);s.removeClass("not-in-wishlist"),s.find(".nmgr-animate").addClass("nmgr-animation-scaleshrink"),t(document.body).trigger("nmgr_added_to_wishlist",[r])}if(["atw_submit_dialog","atw_get_section"].includes(i)&&(e(),r.error_data)){var d=t("#nmgr-atw-content");for(var c in d.find(".nmgr-validate").removeClass("nmgr-invalid").find(".nmgr-error-text").remove(),r.error_data){var m=t("#nmgr-atw-content #"+c).closest(".nmgr-validate");m.removeClass("nmgr-valid").addClass("nmgr-invalid"),r.error_data[c].forEach((function(t){m.append('<div class="nmgr-error-text">'+t+"</div>")}))}}})).on("click",".nmgr-atw-add",(function(e){e.preventDefault();var a=this;t(a).find(".nmgr-animate").removeClass("nmgr-animation-scaleshrink");var n={block:a,postdata:{nmgr_post_action:a.dataset.post_action,dataset:a.dataset}};nmgr.post_action(n)})).on("submit","form#nmgr-atw-content",(function(e){e.preventDefault();var a={block:this,postdata:{nmgr_post_action:this.dataset.post_action,formdata:t(this).serialize()}};nmgr.post_action(a)})).on("change","select#atw-selwish",(function(){var e="data-in-wishlist-"+t(this).val(),a=t("#nmgr-atw-dialog").find("["+e+"]");a.length>0&&t(a).each((function(){var a=t(this).attr(e);if(t(this).is(":checkbox")){var n=t('label[for="'+t(this).attr("id")+'"]');a===t(this).val()?(this.checked=!0,n.attr("title",n.attr("data-title-on"))):(this.checked=!1,n.attr("title",n.attr("data-title-off")))}else if(t(this).is(".nmgr-cart-qty-wrapper")&&a){var o=t(this).find(".nmgr-qty");o.text(a),o.attr("data-qty",a)}}))})),t(".variations_form").on("found_variation.wc-variation-form",(function(){var e=t(this).data("product_id"),n=t(this).serialize();a(e).attr("data-extra_data",n).removeClass("disabled")})).on("hide_variation",(function(){a(t(this).data("product_id")).attr("data-extra_data","").addClass("disabled")}))}(),nmgr.save_form={init:function(){nmgr.init_datepicker(),t(document.body).on("submit",".nmgr-ajax .nmgr-form",this.submit).on("nmgr_post_action_response",this.post_action_response)},post_action_response:function(e,a){if("save_form"===a.postdata.nmgr_post_action){if(a.response.error_data)for(var n in a.response.error_data){var o=t("#"+n).closest(".nmgr-validate");o.removeClass("nmgr-valid").addClass("nmgr-invalid"),a.response.error_data[n].forEach((function(t){o.append('<div class="nmgr-error-text">'+t+"</div>")}))}t(document.body).trigger("nmgr_save_form",[a.response])}},submit:function(e){e.preventDefault();var a=t(this);a.find(".nmgr-validate").removeClass("nmgr-invalid").find(".nmgr-error-text").remove();var n={block:this,postdata:{data:a.serialize(),nmgr_post_action:"save_form"}};nmgr.post_action(n)}},nmgr.save_form.init();var a={container:"#nmgr-images",noticeSelector:'<div class="nmgr-image-notice woocommerce-error"></div>',noticeTimer:"",bgContainer:".nmgr-wrapper.nmgr-bg",featContainer:".nmgr-wrapper.nmgr-thumbnail",delContainer:".delete-image",init:function(){this.maybe_hide_delete_image_button(),t(document.body).on("change","#nmgr-images .nmgr-image-input",this.validate).on("click","#nmgr-images .delete-image",this.delete).on("nmgr_post_action_response",this.post_action_response)},post_action_response:function(t,e){var n=e.postdata.nmgr_post_action;-1!==["delete_image","save_image"].indexOf(n)&&e.response.success&&a.reloaded(e.response.wishlist||null)},maybe_hide_delete_image_button:function(){for(var e=t("#nmgr-images .nmgr-wrapper"),a=0;a<e.length;a++)t(e[a]).attr("data-image_id")<1?t(e[a]).find(".delete-image").first().hide():t(e[a]).find(".delete-image").first().show()},reloaded:function(e){t(document.body).trigger("nmgr_images_reloaded",e),this.maybe_hide_delete_image_button()},delete:function(t){t.preventDefault();var e={block:this,btn:this,postdata:Object.assign({nmgr_post_action:"delete_image"},this.dataset)};nmgr.post_action(e)},validate:function(e){var n=t(e.target),o=n.closest(".nmgr-wrapper"),i=o.attr("data-context"),r=n[0].files[0],s=r.type;Nmeri_block(o),n.val(""),window.Blob?s.match("image.*")?a.upload(r,i):(o.attr("data-invalid_image_text")&&alert(o.attr("data-invalid_image_text")),Nmeri_unblock(o)):a.upload(r,i)},upload:function(e,n){var o=new FormData,i=t(a.container);o.append("nmgr_post_action","save_image"),o.append("nmgr-file",e),o.append("context",n),o.append("wishlist_id",i.attr("data-wishlist_id")),nmgr.post_action({postdata:o})}};a.init(),nmgr.items={container:"#nmgr-items",init:function(){t(document.body).on("nmgr_post_action_response",this.post_action_response).on("click","#nmgr-items .nmgr-post-action",this.pre_post_action).on("input",".nmgr-item-part.nmgr_quantity input.quantity",this.save_item_quantity).on("change",".nmgr-product-search",this.new_add_items_row).on("click",".nmgr-add-items-dialog .nmgr-add",this.add_items).on("removed_from_cart",this.remove_notice).on("click",".nmgr_add_to_cart_button",this.add_single_product_to_cart).on("click",".nmgr-bulk-add-to-cart",this.add_multiple_products_to_cart).on("change","#nmgr-items .nmgr-select-all",this.toggle_select_items).on("change","#nmgr-items .nmgr-select",this.maybe_show_bulk_actions).on("nmgr_add_to_cart_response",this.remove_loading_animation).on("click",".nmgr-display-modes.items .mode",this.save_display_mode_to_session).on("input","#nmgr-purchase-refund-form .nmgr-quantity",this.toggle_purchase_refund_options).on("submit","#nmgr-purchase-refund-form",this.submit_purchase_refund_form).on("dialogopen","#nmgr-add-items-dialog",this.init_add_items_form)},reloaded:function(e){t(document.body).trigger("nmgr_items_reloaded",e)},pre_post_action:function(e){e.preventDefault();var a=Object.assign({},this.dataset);a.dataset=t("#nmgr-items")[0].dataset,"bulk"===this.dataset.nmgr_post_mode&&(a.wishlist_item_ids=nmgr.items.get_selected_item_ids(),delete a.wishlist_item_id);var n={btn:this,block:nmgr.items.container,postdata:a};nmgr.post_action(n)},post_action_response:function(e,a){a.response.replace_templates&&a.response.replace_templates.hasOwnProperty("#nmgr-items")&&nmgr.items.reloaded(a.response.wishlist||null),"delete_item"===a.postdata.nmgr_post_action&&(t(document.body).trigger("wc_fragment_refresh"),t(document.body).trigger("nmgr_removed_from_wishlist",a.response))},save_item_quantity:function(){var t={block:this.closest(".nmgr-item-part").parentElement,postdata:{nmgr_post_action:"save_item_quantity",wishlist_item_id:this.dataset.item_id,quantity:this.value}};nmgr.post_action(t)},init_add_items_form:function(){t(document.body).trigger("nmgr-select2-init")},new_add_items_row:function(){if(t(this).closest("tr").is(":last-child")){var e=t(this).closest("table").find("tbody"),a=e.find("tr").length,n=e.data("row").replace(/\[0\]/g,"["+a+"]");e.append('<tr class="added-row">'+n+"</tr>"),t(document.body).trigger("nmgr-select2-init")}},add_items:function(){var e=[];t(this).closest(".nmgr-add-items-dialog").find("tbody tr").each((function(){var a={};t(t(this).find(":input").serializeArray()).each((function(t,e){a[e.name]=e.value})),e.push(a)}));var a={block:this,postdata:{nmgr_post_action:"add_item",wishlist_id:t(nmgr.items.container).attr("data-wishlist_id"),nmgr_add_items_data:e}};nmgr.post_action(a)},add_single_product_to_cart:function(e){var a=t(this),n={},o=a.closest(".nmgr-add-to-cart-form");if(!a.is(".nmgr_ajax_add_to_cart"))return!0;e.preventDefault(),t(o.serializeArray()).each((function(t,e){n[e.name]=e.value})),a.removeClass("added").addClass("loading"),nmgr.items.add_to_cart([n])},add_multiple_products_to_cart:function(e){e.preventDefault();var a=[],n=this;if(n.classList.add("loading"),t(nmgr.items.container).find(".nmgr-select:checked").closest(".item").each((function(){var e={},o=t(this).find(".nmgr-add-to-cart-form");o.length&&(t(o.serializeArray()).each((function(t,a){e[a.name]=a.value})),a.push(e),n.classList.contains("nmgr_ajax_add_to_cart")&&t(this).find(".nmgr_add_to_cart_button").removeClass("added").addClass("loading"))})),a.length)if(n.classList.contains("nmgr_ajax_add_to_cart"))nmgr.items.add_to_cart(a);else{var o=JSON.stringify(a),i=document.createElement("form"),r=document.createElement("input");i.method="post",r.type="hidden",r.name="nmgr_add_to_cart_item_data_string",r.value=o,i.appendChild(r),document.body.appendChild(i),i.submit()}else n.classList.remove("loading")},add_to_cart:function(e){var a={action:"nmgr_add_to_cart",nmgr_add_to_cart_item_data:e};t.post(nmgr_global_params.ajax_url,a,(function(e){e.fragments&&(e.fragments.success&&e.fragments.redirect_url?window.location=e.fragments.redirect_url:(t(".woocommerce-error, .woocommerce-message, .woocommerce-info").remove(),t(document.body).trigger("nmgr_add_to_cart_response",e.fragments),e.fragments.notices&&e.fragments.notices.forEach((function(t){Nmeri_showToast(t)})),e.fragments.success&&(t(document.body).trigger("added_to_cart",[e.fragments,e.cart_hash]),t(document.body).trigger("nmgr_added_to_cart",[e.fragments.items_data?e.fragments.items_data:""]))))}))},remove_loading_animation:function(e,a){void 0!==a&&a.items_data&&a.items_data.forEach((function(e){t('[data-wishlist_item_id="'+e.wishlist_item_id+'"].nmgr_add_to_cart_button').removeClass("loading")}));var n=document.querySelector(".nmgr-bulk-add-to-cart");n&&n.classList.remove("loading")},toggle_select_items:function(){var t=document.querySelectorAll(".nmgr-select");if(0<t.length){for(var e=0;e<t.length;e++)!0===this.checked?t[e].checked=!0:t[e].checked=!1;nmgr.items.maybe_show_bulk_actions()}},maybe_show_bulk_actions:function(){var t=document.querySelector(".nmgr-items-bulk-actions"),e=document.querySelectorAll("#nmgr-items .nmgr-select:checked");if(e.length&&!t.classList.contains("show"))t.classList.add("show");else if(!e.length&&t.classList.contains("show")){var a=document.querySelector("#nmgr-items .nmgr-select-all");a&&(a.checked=!1),t.classList.remove("show")}},get_selected_items:function(){return document.querySelectorAll("#nmgr-items .nmgr-select:checked")},get_selected_item_ids:function(){var t=[],e=this.get_selected_items();return e.length&&e.forEach((function(e){t.push(e.value)})),t},save_display_mode_to_session:function(e){e.preventDefault();var a="#nmgr_table_items",n={block:a,postdata:{nmgr_post_action:"save_display_mode_to_session",section_dataset:t("#nmgr-items")[0].dataset,table_dataset:t(a).data(),mode:this.dataset.mode}};nmgr.post_action(n)},toggle_purchase_refund_options:function(){var e=t(this).closest("form"),a=parseInt(this.value),n=parseInt(this.dataset.qty);a<n?e.find(".nmgr-options").fadeOut():a>n&&e.find(".nmgr-options").fadeIn()},submit_purchase_refund_form:function(e){e.preventDefault();var a={block:this,postdata:Object.assign(Nmeri_getFormdata(this),{dataset:t("#nmgr-items")[0].dataset,nmgr_post_action:"save_purchase_refund_form"})};nmgr.post_action(a)},remove_notice:function(e){var a=".woocommerce-error, .woocommerce-message, .woocommerce-info";void 0!==e?t(e).find(a).remove():t(a).remove()}},nmgr.items.init(),{init:function(){t(document.body).on("click",".nmgr-message .delete-wishlist-message",this.delete)},delete:function(e){e.preventDefault();var a={btn:this,block:t(this).closest(".nmgr-message"),postdata:Object.assign({},this.dataset)};nmgr.post_action(a)}}.init(),{init:function(){t(document.body).on("click",".nmgr-copy-shipping-address",this.load_address)},load_address:function(e){if(e.preventDefault(),t(".nmgr-shipping-fields").length>0){var a=JSON.parse(e.target.dataset.nmgrAddress);for(var n in a)t(".nmgr-shipping-fields :input#shipping_"+n).val(a[n]).trigger("change")}}}.init(),t(document.body).on("click",".nmgr-copy",(function(){var e=t("<input>"),a=t(this);t("body").append(e),e.val(a.text()).select(),document.execCommand("copy"),e.remove(),a.addClass("nmgr-animation-scaleshrink"),setTimeout((function(){a.removeClass("nmgr-animation-scaleshrink")}),700)}))}));